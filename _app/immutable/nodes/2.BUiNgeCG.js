import{a as p,f,t as de,b as ce,c as se}from"../chunks/P9lsyJN8.js";import{o as ue}from"../chunks/BDunwwt_.js";import{a3 as r,a6 as a,a0 as D,a7 as pe,a5 as l,f as e,a4 as R,a8 as M,Y,a1 as Z,ae as F,u as K,w as ge,Z as L,_ as re,a2 as C}from"../chunks/DsCzRQW9.js";import{s as S,d as ie}from"../chunks/C-_o5PLK.js";import{i as q}from"../chunks/rK5mkmgS.js";import{b as ae}from"../chunks/CAB4_IbL.js";import{s as V,g as ne,h as he}from"../chunks/zUqiq0NJ.js";import{s as fe}from"../chunks/C0o605ql.js";import{p as U}from"../chunks/DAvDxDB4.js";import{s as $,r as me}from"../chunks/b05JO4El.js";import{s as le}from"../chunks/CeoFgO1r.js";import{I as _e}from"../chunks/BDG9mx72.js";import{i as ke}from"../chunks/9nIbbFR1.js";import{e as oe,i as ve}from"../chunks/BYJ2rnKm.js";import{W as we}from"../chunks/CQdtTohv.js";import{b as xe}from"../chunks/CkB6V6u5.js";import{b as be}from"../chunks/LmzTHd12.js";import{g as ye}from"../chunks/B8PVRu2a.js";import{C as ze}from"../chunks/C6-Y0fCO.js";var $e=f("<div><!></div>");function O(y,o){let i=U(o,"variant",3,"default"),t=U(o,"class",3,"");var v=$e(),d=r(v);fe(d,()=>o.children),a(v),D(()=>V(v,1,`card ${i()??""} ${t()??""}`,"svelte-1udyrqm")),p(y,v)}var Ce=f('<span class="small svelte-17xvzis"> </span>'),De=f('<div class="progress-bar svelte-17xvzis"><div class="fill svelte-17xvzis"></div></div>'),Pe=f('<div class="action-arrow svelte-17xvzis"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></div>'),Se=f('<div class="stat-card svelte-17xvzis"><div class="stat-header svelte-17xvzis"><h3 class="svelte-17xvzis"> </h3> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></div> <div class="stat-value svelte-17xvzis"><span class="big svelte-17xvzis"> </span> <!></div> <!> <!></div>');function te(y,o){let i=U(o,"unit",3,""),t=U(o,"showArrow",3,!1),v=U(o,"arrowColor",3,"#ef4444");var d=Se(),g=r(d),w=r(g),m=r(w,!0);a(w),pe(2),a(g);var _=l(g,2),c=r(_),h=r(c,!0);a(c);var s=l(c,2);{var n=b=>{var x=Ce(),z=r(x,!0);a(x),D(()=>S(z,i())),p(b,x)};q(s,b=>{i()&&b(n)})}a(_);var u=l(_,2);{var P=b=>{var x=De(),z=r(x);a(x),D(()=>le(z,`width: ${o.progress??""}%`)),p(b,x)};q(u,b=>{o.progress!==void 0&&b(P)})}var B=l(u,2);{var j=b=>{var x=Pe(),z=r(x);a(x),D(()=>$(z,"stroke",v())),p(b,x)};q(B,b=>{t()&&b(j)})}a(d),D(()=>{S(m,o.title),S(h,o.value)}),p(y,d)}var Te=f('<div class="progress-circle svelte-2a8qf2"><svg class="svelte-2a8qf2"><circle class="bg svelte-2a8qf2"></circle><circle class="progress svelte-2a8qf2" stroke-linecap="round"></circle></svg> <div class="content svelte-2a8qf2"><span class="percentage"> </span></div></div>');function Ie(y,o){let i=U(o,"percentage",3,0),t=U(o,"size",3,120);const v=10,d=R(()=>(t()-v)/2),g=R(()=>e(d)*2*Math.PI),w=R(()=>e(g)-i()/100*e(g));var m=Te(),_=r(m),c=r(_);$(c,"stroke-width",v);var h=l(c);$(h,"stroke-width",v),a(_);var s=l(_,2),n=r(s),u=r(n);a(n),a(s),a(m),D(()=>{le(m,`width: ${t()??""}px; height: ${t()??""}px;`),$(_,"width",t()),$(_,"height",t()),$(_,"viewBox",`0 0 ${t()??""} ${t()??""}`),$(c,"cx",t()/2),$(c,"cy",t()/2),$(c,"r",e(d)),$(h,"cx",t()/2),$(h,"cy",t()/2),$(h,"r",e(d)),$(h,"stroke-dasharray",e(g)),$(h,"stroke-dashoffset",e(w)),$(h,"transform",`rotate(-90 ${t()/2} ${t()/2})`),S(u,`${i()??""}%`)}),p(y,m)}var Ae=f('<div class="lesson-info svelte-1ps3j69"><span class="label svelte-1ps3j69">Siguiente lecciÃ³n:</span> <h2 class="svelte-1ps3j69"> </h2> <button class="btn-continue svelte-1ps3j69">Continuar</button></div> <div class="progress-wrapper svelte-1ps3j69"><!></div>',1);function qe(y,o){O(y,{variant:"lesson",class:"next-lesson",children:(i,t)=>{var v=Ae(),d=M(v),g=l(r(d),2),w=r(g,!0);a(g);var m=l(g,2);m.__click=function(...h){o.onContinue?.apply(this,h)},a(d);var _=l(d,2),c=r(_);Ie(c,{get percentage(){return o.progress},size:100}),a(_),D(()=>S(w,o.lessonTitle)),p(i,v)},$$slots:{default:!0}})}ie(["click"]);var Be=ce('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>'),Le=f('<div class="check svelte-bl83am"><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div>'),je=f('<div><div class="icon svelte-bl83am"><!></div> <span class="name svelte-bl83am"> </span> <!></div>');function Me(y,o){Y(o,!0);var i=je();let t;var v=r(i),d=r(v);{var g=s=>{var n=de();D(()=>S(n,o.achievement.icon)),p(s,n)},w=s=>{var n=Be();p(s,n)};q(d,s=>{o.achievement.unlocked?s(g):s(w,!1)})}a(v);var m=l(v,2),_=r(m,!0);a(m);var c=l(m,2);{var h=s=>{var n=Le();p(s,n)};q(c,s=>{o.achievement.unlocked&&s(h)})}a(i),D(()=>{t=V(i,1,"badge svelte-bl83am",null,t,{locked:!o.achievement.unlocked}),S(_,o.achievement.name)}),p(y,i),Z()}var Ue=f('<div class="xp-icon svelte-609rsk">ðŸ’Ž</div> <div class="xp-info svelte-609rsk"><span class="label svelte-609rsk">XP Total:</span> <span class="value svelte-609rsk"> </span></div>',1),Ee=f('<span class="label svelte-609rsk">Palabras aprendidas:</span> <div class="value-row svelte-609rsk"><span class="icon">ðŸ“–</span> <span class="value"> </span></div>',1),Oe=f('<span class="label svelte-609rsk">Racha actual:</span> <div class="value-row svelte-609rsk"><span class="icon">ðŸ”¥</span> <span class="value"> </span></div>',1),We=f('<h3 class="svelte-609rsk">Actividad semanal</h3> <!>',1),He=f('<div class="card-header svelte-609rsk"><h3 class="svelte-609rsk">Logros</h3> <span class="link svelte-609rsk">Desbloqueado</span></div> <div class="badges-grid svelte-609rsk"></div>',1),Ne=f('<aside class="sidebar svelte-609rsk"><!> <div class="stats-grid svelte-609rsk"><!> <!></div> <!> <!></aside>');function Fe(y,o){Y(o,!1);let i=U(o,"user",8);ke();var t=Ne(),v=r(t);O(v,{variant:"xp",class:"xp-card",children:(c,h)=>{var s=Ue(),n=l(M(s),2),u=l(r(n),2),P=r(u,!0);a(u),a(n),D(B=>S(P,B),[()=>(F(i()),K(()=>i().totalXP?.toLocaleString()??"12,450"))]),p(c,s)},$$slots:{default:!0}});var d=l(v,2),g=r(d);O(g,{class:"mini-card",children:(c,h)=>{var s=Ee(),n=l(M(s),2),u=l(r(n),2),P=r(u,!0);a(u),a(n),D(()=>S(P,(F(i()),K(()=>i().wordsLearned??540)))),p(c,s)},$$slots:{default:!0}});var w=l(g,2);O(w,{class:"mini-card",children:(c,h)=>{var s=Oe(),n=l(M(s),2),u=l(r(n),2),P=r(u);a(u),a(n),D(()=>S(P,`${F(i()),K(()=>i().streakDays)??""} DÃ­as`)),p(c,s)},$$slots:{default:!0}}),a(d);var m=l(d,2);O(m,{class:"weekly-card",children:(c,h)=>{var s=We(),n=l(M(s),2);{let u=ge(()=>(F(i()),K(()=>i().weeklyActivity??[15,25,18,30,25,22,12])));we(n,{get data(){return e(u)}})}p(c,s)},$$slots:{default:!0}});var _=l(m,2);O(_,{class:"achievements-card",children:(c,h)=>{var s=He(),n=l(M(s),2);oe(n,5,()=>(F(i()),K(()=>i().achievements||[])),ve,(u,P)=>{Me(u,{get achievement(){return e(P)}})}),a(n),p(c,s)},$$slots:{default:!0}}),a(t),p(y,t),Z()}var Ke=f('<button class="clear-btn svelte-e8dzs5">Clear</button>'),Qe=f('<div><div class="bubble svelte-e8dzs5"> </div></div>'),Xe=f('<div class="message svelte-e8dzs5"><div class="bubble loading svelte-e8dzs5"><span class="dot svelte-e8dzs5"></span> <span class="dot svelte-e8dzs5"></span> <span class="dot svelte-e8dzs5"></span></div></div>'),Ge=f('<div class="messages-container svelte-e8dzs5"><!> <!></div>'),Re=f('<div><div class="chat-header svelte-e8dzs5"><div class="header-left svelte-e8dzs5"><span class="chat-icon svelte-e8dzs5">ðŸ’¬</span> <span class="chat-title svelte-e8dzs5">Ask your AI Tutor</span></div> <!></div> <!> <div class="input-row svelte-e8dzs5"><input type="text" placeholder="Ask anything about English..." class="svelte-e8dzs5"/> <button class="send-btn svelte-e8dzs5" aria-label="Send message"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-e8dzs5"><line x1="22" y1="2" x2="11" y2="13" class="svelte-e8dzs5"></line><polygon points="22 2 15 22 11 13 2 9 22 2" class="svelte-e8dzs5"></polygon></svg></button></div></div>');function Ve(y,o){Y(o,!0);let i=ne(),t=L(re([])),v=L(""),d=L(!1),g=L(!1),w=L(null);async function m(){if(!e(v).trim()||e(d)||!i)return;const k={id:crypto.randomUUID(),role:"user",content:e(v),timestamp:new Date().toISOString()};C(t,[...e(t),k],!0),C(v,""),C(d,!0),C(g,!0);try{const W=[{role:"system",content:new ze(i).generateSystemPrompt("Quick Help")},...e(t).slice(-6).map(A=>({role:A.role,content:A.content}))],H=await ye(W,{maxTokens:200}),I={id:crypto.randomUUID(),role:"assistant",content:H.content,timestamp:new Date().toISOString()};C(t,[...e(t),I],!0)}catch{C(t,[...e(t),{id:crypto.randomUUID(),role:"assistant",content:"Sorry, I couldn't connect. Try again later!",timestamp:new Date().toISOString()}],!0)}finally{C(d,!1),_()}}function _(){setTimeout(()=>{e(w)&&(e(w).scrollTop=e(w).scrollHeight)},50)}function c(k){k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),m())}function h(){C(t,[],!0),C(g,!1)}var s=Re();let n;var u=r(s),P=l(r(u),2);{var B=k=>{var T=Ke();T.__click=h,p(k,T)};q(P,k=>{e(t).length>0&&k(B)})}a(u);var j=l(u,2);{var b=k=>{var T=Ge(),N=r(T);oe(N,17,()=>e(t),ve,(I,A)=>{var E=Qe();let X;var G=r(E),J=r(G,!0);a(G),a(E),D(()=>{X=V(E,1,"message svelte-e8dzs5",null,X,{user:e(A).role==="user"}),S(J,e(A).content)}),p(I,E)});var W=l(N,2);{var H=I=>{var A=Xe();p(I,A)};q(W,I=>{e(d)&&I(H)})}a(T),be(T,I=>C(w,I),()=>e(w)),p(k,T)};q(j,k=>{e(g)&&e(t).length>0&&k(b)})}var x=l(j,2),z=r(x);me(z),z.__keydown=c;var Q=l(z,2);Q.__click=m,a(x),a(s),D(k=>{n=V(s,1,"quick-chat svelte-e8dzs5",null,n,{expanded:e(g)}),z.disabled=e(d),Q.disabled=k},[()=>!e(v).trim()||e(d)]),xe(z,()=>e(v),k=>C(v,k)),p(y,s),Z()}ie(["click","keydown"]);var Ye=f('<div class="loading-screen svelte-1uha8ag"><div class="spinner svelte-1uha8ag"></div> <p>Cargando...</p></div>'),Ze=f('<div class="dashboard svelte-1uha8ag"><div class="main-content"><header class="welcome-header svelte-1uha8ag"><h1 class="svelte-1uha8ag"> </h1> <div class="streak-badge svelte-1uha8ag"><span class="fire">ðŸ”¥</span> <span> </span></div></header> <!> <div class="hero-section svelte-1uha8ag"><!> <div class="quick-stats svelte-1uha8ag"><!> <!></div> <!></div></div> <!></div>');function ks(y,o){Y(o,!0);let i=L(null),t=L(0),v=L(re({title:"Start Learning",id:"greetings"})),d=L(!0);const g={greetings:"Greetings",food:"Food & Drink",directions:"Directions",travel:"Travel Basics",family:"Family",hobbies:"Hobbies",shopping:"Shopping",food2:"Dining Out",emotions:"Emotions",weather:"Weather",nature:"Nature"};ue(()=>{if(!he()){window.location.href=`${ae}/onboarding`;return}if(C(i,ne(),!0),C(d,!1),e(i)){const s=new Date().getDay();C(t,e(i).weeklyActivity[s]||0,!0);const n=e(i).skills.find(u=>u.status==="current")||e(i).skills.find(u=>u.status==="locked");n&&C(v,{title:g[n.id]||n.id,id:n.id},!0)}});function w(){window.location.href=`${ae}/lesson`}var m=se(),_=M(m);{var c=s=>{var n=Ye();p(s,n)},h=s=>{var n=se(),u=M(n);{var P=B=>{var j=Ze(),b=r(j),x=r(b),z=r(x),Q=r(z);a(z);var k=l(z,2),T=l(r(k),2),N=r(T);a(T),a(k),a(x);var W=l(x,2);Ve(W,{});var H=l(W,2),I=r(H);qe(I,{get lessonTitle(){return e(v).title},progress:60,onContinue:w});var A=l(I,2),E=r(A);{let ee=R(()=>e(t)/20*100);te(E,{title:"Meta diaria",get value(){return e(t)},unit:"/20 mins",get progress(){return e(ee)}})}var X=l(E,2);te(X,{title:"Palabras aprendidas",get value(){return e(i).wordsLearned},unit:"palabras",showArrow:!0}),a(A);var G=l(A,2);O(G,{variant:"light",class:"skill-tree-card",children:(ee,Je)=>{_e(ee,{get userSkills(){return e(i).skills}})},$$slots:{default:!0}}),a(H),a(b);var J=l(b,2);Fe(J,{get user(){return e(i)}}),a(j),D(()=>{S(Q,`Bienvenido de nuevo, ${e(i).name??""}!`),S(N,`${e(i).streakDays??""} DÃ­as de racha`)}),p(B,j)};q(u,B=>{e(i)&&B(P)},!0)}p(s,n)};q(_,s=>{e(d)?s(c):s(h,!1)})}p(y,m),Z()}export{ks as component};
