import{a as u,f as p,c as Fe,b as he}from"../chunks/P9lsyJN8.js";import{Y as Pe,Z as f,_ as ve,$ as Ze,f as e,a0 as b,a1 as Oe,a2 as a,a3 as s,a4 as ce,a5 as l,a6 as t,a7 as G,a8 as de,a9 as Re}from"../chunks/DsCzRQW9.js";import{d as Ue,s as x}from"../chunks/C-_o5PLK.js";import{i as w}from"../chunks/rK5mkmgS.js";import{e as ue}from"../chunks/BYJ2rnKm.js";import{r as Ve}from"../chunks/b05JO4El.js";import{s as ze,u as Je,a as et,i as tt,b as st}from"../chunks/zUqiq0NJ.js";import{s as at}from"../chunks/CeoFgO1r.js";import{b as ot}from"../chunks/CkB6V6u5.js";import{g as ye}from"../chunks/DhYrWMOW.js";import{b as pe}from"../chunks/CAB4_IbL.js";import{s as fe}from"../chunks/B8PVRu2a.js";var rt=p(`<div class="completion-screen svelte-1yo039t"><div class="completion-content svelte-1yo039t"><div class="trophy svelte-1yo039t">游끥</div> <h1 class="svelte-1yo039t">Lesson Complete!</h1> <p class="subtitle svelte-1yo039t">You've mastered Introductions</p> <div class="stats-grid svelte-1yo039t"><div class="stat-item svelte-1yo039t"><span class="stat-value svelte-1yo039t"> </span> <span class="stat-label svelte-1yo039t">XP Earned</span></div> <div class="stat-item svelte-1yo039t"><span class="stat-value svelte-1yo039t"> </span> <span class="stat-label svelte-1yo039t">Questions</span></div> <div class="stat-item svelte-1yo039t"><span class="stat-value svelte-1yo039t">100%</span> <span class="stat-label svelte-1yo039t">Accuracy</span></div></div> <button class="finish-btn svelte-1yo039t">Continue Learning</button></div></div>`),lt=p('<button class="word-chip selected svelte-1yo039t"> </button>'),it=p('<span class="placeholder-text svelte-1yo039t">Select words below</span>'),nt=p("<button> </button>"),vt=p('<div class="explanation-loading svelte-1yo039t"><span class="dot svelte-1yo039t"></span> <span class="dot svelte-1yo039t"></span> <span class="dot svelte-1yo039t"></span></div>'),ct=p('<p class="explanation-text svelte-1yo039t"> </p>'),dt=p('<div class="tutor-response svelte-1yo039t"><div class="tutor-avatar svelte-1yo039t">游꿉</div> <p class="svelte-1yo039t"> </p></div>'),ut=he('<svg class="spinner svelte-1yo039t" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" opacity="0.3" class="svelte-1yo039t"></circle><path d="M12 2 A10 10 0 0 1 22 12" stroke="currentColor" stroke-width="3" fill="none" class="svelte-1yo039t"></path></svg>'),yt=he('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1yo039t"><line x1="22" y1="2" x2="11" y2="13" class="svelte-1yo039t"></line><polygon points="22 2 15 22 11 13 2 9 22 2" class="svelte-1yo039t"></polygon></svg>'),pt=p('<div class="tutor-section svelte-1yo039t"><!> <div class="tutor-input-container svelte-1yo039t"><span class="tutor-label svelte-1yo039t">Ask your personal tutor</span> <div class="tutor-input-box svelte-1yo039t"><input type="text" class="tutor-input svelte-1yo039t" placeholder="Why is this word order?"/> <button class="send-btn svelte-1yo039t"><!></button></div></div></div>'),ft=p('<div class="feedback-panel svelte-1yo039t"><div class="feedback-icon svelte-1yo039t"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1yo039t"><circle cx="12" cy="12" r="10" class="svelte-1yo039t"></circle><line x1="15" y1="9" x2="9" y2="15" class="svelte-1yo039t"></line><line x1="9" y1="9" x2="15" y2="15" class="svelte-1yo039t"></line></svg></div> <div class="feedback-content svelte-1yo039t"><h3 class="feedback-title svelte-1yo039t">Not quite right</h3> <!></div> <!> <button class="retry-btn svelte-1yo039t">Try Again</button></div>'),ht=p('<div class="success-panel svelte-1yo039t"><div class="success-icon svelte-1yo039t"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1yo039t"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" class="svelte-1yo039t"></path><polyline points="22 4 12 14.01 9 11.01" class="svelte-1yo039t"></polyline></svg></div> <h3 class="svelte-1yo039t">Correct! +15 XP</h3> <button class="continue-btn svelte-1yo039t"> </button></div>'),gt=p('<footer class="footer svelte-1yo039t"><button class="action-btn svelte-1yo039t">Check</button></footer>'),_t=p('<div class="lesson-content svelte-1yo039t"><h2 class="lesson-title svelte-1yo039t">Lesson 1: Introductions</h2> <div class="scene svelte-1yo039t"><div class="speech-bubble svelte-1yo039t"> </div> <div class="character svelte-1yo039t"><svg viewBox="0 0 100 100" class="avatar-svg svelte-1yo039t"><circle cx="50" cy="50" r="40" fill="#bfdbfe" class="svelte-1yo039t"></circle><circle cx="50" cy="40" r="15" fill="#fde047" class="svelte-1yo039t"></circle><path d="M35 80 Q50 90 65 80 L65 100 L35 100 Z" fill="#3b82f6" class="svelte-1yo039t"></path><circle cx="45" cy="38" r="2" fill="#1e3a8a" class="svelte-1yo039t"></circle><circle cx="55" cy="38" r="2" fill="#1e3a8a" class="svelte-1yo039t"></circle><path d="M45 45 Q50 48 55 45" stroke="#1e3a8a" stroke-width="2" fill="none" class="svelte-1yo039t"></path><path d="M35 30 Q50 20 65 30" stroke="#1e1e1e" stroke-width="4" fill="none" class="svelte-1yo039t"></path></svg></div></div> <div class="question-area svelte-1yo039t"><p class="instruction svelte-1yo039t"> </p> <div class="answer-line svelte-1yo039t"><!> <!></div> <div class="divider svelte-1yo039t"></div> <div class="word-bank svelte-1yo039t"></div></div> <!> <!></div> <!>',1),mt=p('<div class="lesson-page svelte-1yo039t"><header class="header svelte-1yo039t"><button class="back-btn svelte-1yo039t" aria-label="Back"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1yo039t"><path d="M19 12H5" class="svelte-1yo039t"></path><path d="M12 19l-7-7 7-7" class="svelte-1yo039t"></path></svg></button> <div class="progress-container svelte-1yo039t"><div class="progress-bar svelte-1yo039t"><div class="fill svelte-1yo039t"></div></div> <span class="progress-text svelte-1yo039t"> </span></div> <div class="placeholder svelte-1yo039t"></div></header> <!></div>');function Lt(ge,_e){Pe(_e,!0);const A=[{id:1,original:"Hola, me llamo...",target:["Hello","my","name","is"],wordBank:["Hello","name","is","my","nice","meet"]},{id:2,original:"쮺칩mo est치s?",target:["How","are","you"],wordBank:["How","you","are","what","is","doing"]},{id:3,original:"Mucho gusto",target:["Nice","to","meet","you"],wordBank:["Nice","meet","to","you","hello","good"]},{id:4,original:"Buenos d칤as",target:["Good","morning"],wordBank:["Good","morning","night","hello","day"]},{id:5,original:"쮻e d칩nde eres?",target:["Where","are","you","from"],wordBank:["Where","you","are","from","what","come"]},{id:6,original:"Soy de Espa침a",target:["I","am","from","Spain"],wordBank:["I","am","from","Spain","is","come"]},{id:7,original:"쮺u치l es tu nombre?",target:["What","is","your","name"],wordBank:["What","is","your","name","who","are"]}];let W=f(0),g=ce(()=>A[e(W)]),me=ce(()=>e(W)/A.length*100),J=f(!1),Z=f(0),k=f(""),O=f(!1),S=f(""),B=f(""),L=f(!1),N=f(!1),X=f(ve([])),h=f(ve([])),_=f(null);function be(){a(X,e(g).wordBank.map((r,i)=>({id:`${e(g).id}-${i}`,text:r,selected:!1})),!0),a(h,[],!0),a(_,null),a(k,""),a(B,""),a(N,!1)}Ze(()=>{e(g)&&be()});function ee(r){if(e(_)!==!0)if(e(_)===!1&&(a(_,null),a(k,""),a(N,!1),a(B,"")),e(h).find(i=>i.id===r.id)){a(h,e(h).filter(c=>c.id!==r.id),!0);const i=e(X).find(c=>c.id===r.id);i&&(i.selected=!1)}else{a(h,[...e(h),r],!0);const i=e(X).find(c=>c.id===r.id);i&&(i.selected=!0)}}async function xe(){const r=e(h).map(c=>c.text).join(" "),i=e(g).target.join(" ");if(a(_,r===i),e(_))a(Z,e(Z)+15),et(15),tt(e(g).target.length),st(1);else{a(k,""),a(O,!0),a(N,!0);const c=[{role:"system",content:"You are a helpful English tutor. Explain briefly (2-3 sentences) why the user's translation is wrong. Focus on grammar or word order. Be encouraging."},{role:"user",content:`Original: "${e(g).original}"
Target: "${i}"
User Wrote: "${r}"
Explain the mistake.`}];try{await fe(c,d=>{a(k,e(k)+d)})}catch(d){a(k,"The correct answer is: "+i+". Try to match the word order exactly!"),console.error("Explanation error:",d)}finally{a(O,!1)}}}function we(){e(W)<A.length-1?Re(W):(a(J,!0),Je("early_bird"))}async function te(){if(!e(S).trim()||e(L))return;a(L,!0),a(B,"");const r=e(h).map(d=>d.text).join(" "),i=e(g).target.join(" "),c=[{role:"system",content:"You are a friendly English tutor named Anglicus. Answer the student's question about this translation exercise. Be helpful, encouraging, and explain concepts clearly. Keep responses concise (2-4 sentences)."},{role:"user",content:`Context: Translating "${e(g).original}" to English.
Correct answer: "${i}"
Student's attempt: "${r}"
Student's question: "${e(S)}"`}];try{await fe(c,d=>{a(B,e(B)+d)})}catch(d){a(B,"Sorry, I couldn't process your question. Try rephrasing it!"),console.error("Tutor error:",d)}finally{a(L,!1),a(S,"")}}function ke(r){r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),te())}function Be(){ye(`${pe}/`)}var R=mt(),U=s(R),se=s(U);se.__click=()=>ye(`${pe}/`);var ae=l(se,2),V=s(ae),Ce=s(V);t(V);var oe=l(V,2),Ee=s(oe);t(oe),t(ae),G(2),t(U);var $e=l(U,2);{var Te=r=>{var i=rt(),c=s(i),d=l(s(c),6),M=s(d),Y=s(M),Q=s(Y);t(Y),G(2),t(M);var j=l(M,2),K=s(j),q=s(K,!0);t(K),G(2),t(j),G(2),t(d);var D=l(d,2);D.__click=Be,t(c),t(i),b(()=>{x(Q,`+${e(Z)??""}`),x(q,A.length)}),u(r,i)},Ae=r=>{var i=_t(),c=de(i),d=l(s(c),2),M=s(d),Y=s(M);t(M),G(2),t(d);var Q=l(d,2),j=s(Q),K=s(j);t(j);var q=l(j,2),D=s(q);ue(D,17,()=>e(h),o=>o.id,(o,v)=>{var n=lt();n.__click=()=>ee(e(v));var E=s(n,!0);t(n),b(()=>x(E,e(v).text)),u(o,n)});var We=l(D,2);{var Se=o=>{var v=it();u(o,v)};w(We,o=>{e(h).length===0&&o(Se)})}t(q);var re=l(q,4);ue(re,21,()=>e(X),o=>o.id,(o,v)=>{var n=nt();n.__click=()=>ee(e(v));var E=s(n,!0);t(n),b(()=>{ze(n,1,`word-chip ${e(v).selected?"used":""}`,"svelte-1yo039t"),n.disabled=e(v).selected,x(E,e(v).text)}),u(o,n)}),t(re),t(Q);var le=l(Q,2);{var Le=o=>{var v=ft(),n=l(s(v),2),E=l(s(n),2);{var Qe=m=>{var C=vt();u(m,C)},qe=m=>{var C=Fe(),F=de(C);{var z=H=>{var I=ct(),$=s(I,!0);t(I),b(()=>x($,e(k))),u(H,I)};w(F,H=>{e(k)&&H(z)},!0)}u(m,C)};w(E,m=>{e(O)?m(Qe):m(qe,!1)})}t(n);var ie=l(n,2);{var Ge=m=>{var C=pt(),F=s(C);{var z=y=>{var T=dt(),ne=l(s(T),2),De=s(ne,!0);t(ne),t(T),b(()=>x(De,e(B))),u(y,T)};w(F,y=>{e(B)&&y(z)})}var H=l(F,2),I=l(s(H),2),$=s(I);Ve($),$.__keydown=ke;var P=l($,2);P.__click=te;var Xe=s(P);{var Ye=y=>{var T=ut();u(y,T)},Ke=y=>{var T=yt();u(y,T)};w(Xe,y=>{e(L)?y(Ye):y(Ke,!1)})}t(P),t(I),t(H),t(C),b(y=>{$.disabled=e(L),P.disabled=y},[()=>!e(S).trim()||e(L)]),ot($,()=>e(S),y=>a(S,y)),u(m,C)};w(ie,m=>{e(N)&&m(Ge)})}var Ne=l(ie,2);Ne.__click=()=>a(_,null),t(v),u(o,v)};w(le,o=>{e(_)===!1&&o(Le)})}var Me=l(le,2);{var je=o=>{var v=ht(),n=l(s(v),4);n.__click=we;var E=s(n,!0);t(n),t(v),b(()=>x(E,e(W)<A.length-1?"Next Question":"Finish Lesson")),u(o,v)};w(Me,o=>{e(_)===!0&&o(je)})}t(c);var He=l(c,2);{var Ie=o=>{var v=gt(),n=s(v);n.__click=xe,t(v),b(()=>n.disabled=e(h).length===0),u(o,v)};w(He,o=>{e(_)===null&&o(Ie)})}b(o=>{x(Y,`${o??""}...`),x(K,`Translate: "${e(g).original??""}"`)},[()=>e(g).target.join(" ")]),u(r,i)};w($e,r=>{e(J)?r(Te):r(Ae,!1)})}t(R),b(()=>{at(Ce,`width: ${e(me)??""}%`),x(Ee,`${e(W)+1}/${A.length??""}`)}),u(ge,R),Oe()}Ue(["click","keydown"]);export{Lt as component};
