import{a as m,f as w,b as P}from"./P9lsyJN8.js";import{o as de}from"./BDunwwt_.js";import{Y as pe,a2 as a,f as e,a5 as n,a3 as f,a8 as fe,a0 as x,a6 as v,a7 as me,a1 as ge,Z as M,a4 as F}from"./DsCzRQW9.js";import{d as be,s as H,e as J}from"./C-_o5PLK.js";import{i as D}from"./rK5mkmgS.js";import{e as N,i as X}from"./BYJ2rnKm.js";import{s as k}from"./b05JO4El.js";import{s as I}from"./zUqiq0NJ.js";import{s as O}from"./CeoFgO1r.js";import{p as _e}from"./DAvDxDB4.js";import{b as ye}from"./CAB4_IbL.js";import{S as T}from"./pPOLttk4.js";var he=P('<path fill="none" stroke="rgba(45, 212, 191, 0.3)" stroke-width="12" filter="url(#pathGlow)" class="svelte-1niuo6o"></path>'),xe=P('<!><path fill="none" stroke-linecap="round"></path>',1),ke=w('<div class="node-ring svelte-1niuo6o"></div>'),we=w('<div class="completion-badge svelte-1niuo6o"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" class="svelte-1niuo6o"><polyline points="20 6 9 17 4 12" class="svelte-1niuo6o"></polyline></svg></div>'),$e=w("<span>â˜…</span>"),Me=w('<button><!> <div class="node-circle svelte-1niuo6o"><span class="node-icon svelte-1niuo6o"> </span> <!></div> <div class="category-dot svelte-1niuo6o"></div> <div class="star-rating svelte-1niuo6o"></div> <span class="node-label svelte-1niuo6o"> </span></button>'),Ce=w('<div class="tree-container svelte-1niuo6o" role="application" aria-label="Interactive Skill Tree Map"><div class="bg-grid svelte-1niuo6o"></div> <div class="bg-glow glow-1 svelte-1niuo6o"></div> <div class="bg-glow glow-2 svelte-1niuo6o"></div> <div class="bg-glow glow-3 svelte-1niuo6o"></div> <div class="tree-content svelte-1niuo6o"><svg class="connections-layer svelte-1niuo6o" width="800" height="2000" style="overflow: visible;"><defs class="svelte-1niuo6o"><linearGradient id="activeGradient" x1="0%" y1="0%" x2="0%" y2="100%" class="svelte-1niuo6o"><stop offset="0%" style="stop-color:#2dd4bf;stop-opacity:1" class="svelte-1niuo6o"></stop><stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" class="svelte-1niuo6o"></stop></linearGradient><filter id="pathGlow" x="-50%" y="-50%" width="200%" height="200%" class="svelte-1niuo6o"><feGaussianBlur stdDeviation="4" result="blur" class="svelte-1niuo6o"></feGaussianBlur><feMerge class="svelte-1niuo6o"><feMergeNode in="blur" class="svelte-1niuo6o"></feMergeNode><feMergeNode in="SourceGraphic" class="svelte-1niuo6o"></feMergeNode></feMerge></filter></defs><!></svg> <div class="nodes-layer svelte-1niuo6o"></div></div> <div class="controls svelte-1niuo6o"><button class="control-btn svelte-1niuo6o" aria-label="Zoom in"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1niuo6o"><line x1="12" y1="5" x2="12" y2="19" class="svelte-1niuo6o"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-1niuo6o"></line></svg></button> <button class="control-btn svelte-1niuo6o" aria-label="Zoom out"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1niuo6o"><line x1="5" y1="12" x2="19" y2="12" class="svelte-1niuo6o"></line></svg></button> <button class="control-btn svelte-1niuo6o" aria-label="Reset view"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1niuo6o"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" class="svelte-1niuo6o"></path><path d="M3 3v5h5" class="svelte-1niuo6o"></path></svg></button></div> <div class="legend svelte-1niuo6o"><div class="legend-item svelte-1niuo6o"><span class="legend-dot svelte-1niuo6o" style="background: #8b5cf6;"></span> <span class="svelte-1niuo6o">Grammar</span></div> <div class="legend-item svelte-1niuo6o"><span class="legend-dot svelte-1niuo6o" style="background: #06b6d4;"></span> <span class="svelte-1niuo6o">Vocabulary</span></div> <div class="legend-item svelte-1niuo6o"><span class="legend-dot svelte-1niuo6o" style="background: #10b981;"></span> <span class="svelte-1niuo6o">Situational</span></div> <div class="legend-item svelte-1niuo6o"><span class="legend-dot svelte-1niuo6o" style="background: #f59e0b;"></span> <span class="svelte-1niuo6o">Business</span></div></div></div>');function Le(Q,q){pe(q,!0);let A=_e(q,"userSkills",19,()=>[]);const C=Math.max(...T.map(t=>t.y));let l=M(1),_=M(0),y=M(0),G=M(!1),K=0,L=0,B=F(()=>T.map(t=>{const s=A().find(i=>i.id===t.id);let o="locked";if(s)o=s.status;else{const p=T.filter(c=>t.requires.includes(c.id)).every(c=>A().find(g=>g.id===c.id)?.status==="completed");(t.requires.length===0||p)&&(o="current")}const u=-t.x,h=C-t.y;return{...t,x:u,y:h,status:o,stars:s?.stars||0}})),ee=F(()=>e(B).flatMap(t=>t.requires.map(s=>{const o=e(B).find(u=>u.id===s);return o?{from:o,to:t,active:o.status==="completed"}:null}).filter(Boolean)));function se(t){if(t.ctrlKey||t.metaKey){t.preventDefault();const s=t.deltaY*-.001,o=Math.min(Math.max(.4,e(l)+s),2.5);a(l,o,!0)}}function te(t){a(G,!0),K=t.clientX-e(_),L=t.clientY-e(y)}function oe(t){e(G)&&(t.preventDefault(),a(_,t.clientX-K),a(y,t.clientY-L))}function Z(){a(G,!1)}function ae(t){t.status!=="locked"&&(window.location.href=`${ye}/lessons/${t.id}`)}function le(t){return{grammar:"#8b5cf6",vocabulary:"#06b6d4",situational:"#10b981",business:"#f59e0b"}[t]||"#6366f1"}function ie(t){return{grammar:"rgba(139, 92, 246, 0.5)",vocabulary:"rgba(6, 182, 212, 0.5)",situational:"rgba(16, 185, 129, 0.5)",business:"rgba(245, 158, 11, 0.5)"}[t]||"rgba(99, 102, 241, 0.5)"}de(()=>{a(l,.75),a(_,250),a(y,80-C*e(l))});var d=Ce();d.__mousedown=te,d.__mousemove=oe,d.__mouseup=Z;var $=n(f(d),8),S=f($),re=n(f(S));N(re,17,()=>e(ee),X,(t,s)=>{var o=xe(),u=fe(o);{var h=c=>{var g=he();x(()=>k(g,"d",`M ${e(s).from.x} ${e(s).from.y} C ${e(s).from.x} ${e(s).from.y+60}, ${e(s).to.x} ${e(s).to.y-60}, ${e(s).to.x} ${e(s).to.y}`)),m(c,g)};D(u,c=>{e(s).active&&c(h)})}var i=n(u);let p;x(()=>{k(i,"d",`M ${e(s).from.x} ${e(s).from.y} C ${e(s).from.x} ${e(s).from.y+60}, ${e(s).to.x} ${e(s).to.y-60}, ${e(s).to.x} ${e(s).to.y}`),p=I(i,0,"connection-path svelte-1niuo6o",null,p,{active:e(s).active}),k(i,"stroke",e(s).active?"url(#activeGradient)":"#1e293b"),k(i,"stroke-width",e(s).active?"4":"3")}),m(t,o)}),v(S);var E=n(S,2);N(E,21,()=>e(B),X,(t,s)=>{var o=Me();o.__click=()=>ae(e(s));var u=f(o);{var h=r=>{var b=ke();m(r,b)};D(u,r=>{(e(s).status==="current"||e(s).status==="completed")&&r(h)})}var i=n(u,2),p=f(i),c=f(p,!0);v(p);var g=n(p,2);{var ve=r=>{var b=we();m(r,b)};D(g,r=>{e(s).status==="completed"&&r(ve)})}v(i);var Y=n(i,4);N(Y,20,()=>Array(3),X,(r,b,ce)=>{var j=$e();let z;x(()=>z=I(j,1,"star svelte-1niuo6o",null,z,{filled:ce<e(s).stars})),m(r,j)}),v(Y);var W=n(Y,2),ue=f(W,!0);v(W),v(o),x((r,b)=>{I(o,1,`skill-node ${e(s).status??""}`,"svelte-1niuo6o"),O(o,`
            --node-x: ${e(s).x??""}px;
            --node-y: ${e(s).y??""}px;
            --category-color: ${r??""};
            --category-glow: ${b??""};
          `),o.disabled=e(s).status==="locked",k(o,"title",e(s).description),H(c,e(s).icon),H(ue,e(s).name)},[()=>le(e(s).category),()=>ie(e(s).category)]),m(t,o)}),v(E),v($);var R=n($,2),U=f(R);U.__click=()=>a(l,Math.min(2.5,e(l)+.2),!0);var V=n(U,2);V.__click=()=>a(l,Math.max(.4,e(l)-.2),!0);var ne=n(V,2);ne.__click=()=>{a(l,.85),a(_,350),a(y,50-C*e(l))},v(R),me(2),v(d),x(()=>O($,`transform: translate(${e(_)??""}px, ${e(y)??""}px) scale(${e(l)??""});`)),J("wheel",d,se),J("mouseleave",d,Z),m(Q,d),ge()}be(["mousedown","mousemove","mouseup","click"]);export{Le as I};
