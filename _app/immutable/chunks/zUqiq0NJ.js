import{h as p}from"./DsCzRQW9.js";const y=[...` 	
\r\fÂ \v\uFEFF`];function w(t,e,i){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),i){for(var o in i)if(i[o])s=s?s+" "+o:o;else if(s.length)for(var l=o.length,r=0;(r=s.indexOf(o,r))>=0;){var a=r+l;(r===0||y.includes(s[r-1]))&&(a===s.length||y.includes(s[a]))?s=(r===0?"":s.substring(0,r))+s.substring(a+1):r=a}}return s===""?null:s}function b(t,e){return t==null?null:String(t)}function P(t,e,i,s,o,l){var r=t.__className;if(p||r!==i||r===void 0){var a=w(i,s,l);(!p||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a)),t.__className=i}else if(l&&o!==l)for(var d in l){var f=!!l[d];(o==null||f!==!!o[d])&&t.classList.toggle(d,f)}return l}const h="anglicus_user";function c(){if(typeof window>"u")return null;try{const t=localStorage.getItem(h);if(!t)return null;const e=JSON.parse(t),i={totalXP:0,wordsLearned:0,weeklyActivity:[0,0,0,0,0,0,0],achievements:[{id:"early_bird",name:"Primeros Pasos",icon:"ðŸŒ…",unlocked:!1},{id:"weekender",name:"Guerrero de Finde",icon:"ðŸ“…",unlocked:!1},{id:"polyglot",name:"PolÃ­glota",icon:"ðŸ—£ï¸",unlocked:!1},{id:"files_on_fire",name:"Racha de Fuego",icon:"ðŸ”¥",unlocked:!1},{id:"unstoppable",name:"Imparable",icon:"ðŸš€",unlocked:!1},{id:"scholar",name:"Estudioso",icon:"ðŸ“š",unlocked:!1},{id:"word_master",name:"Vocabulista",icon:"ðŸ§ ",unlocked:!1},{id:"sharpshooter",name:"Francotirador",icon:"ðŸŽ¯",unlocked:!1}],skills:[{id:"greetings",status:"completed",stars:3},{id:"food",status:"current",stars:1},{id:"directions",status:"locked",stars:0},{id:"travel",status:"locked",stars:0},{id:"family",status:"locked",stars:0},{id:"hobbies",status:"locked",stars:0},{id:"shopping",status:"locked",stars:0},{id:"food2",status:"locked",stars:0},{id:"emotions",status:"locked",stars:0},{id:"weather",status:"locked",stars:0},{id:"nature",status:"locked",stars:0}]},s=i.achievements.map(o=>{const l=e.achievements?.find(r=>r.id===o.id);return l?{...o,unlocked:l.unlocked}:o});return{...i,...e,achievements:s,skills:e.skills||i.skills}}catch{return null}}function u(t){typeof window>"u"||(localStorage.setItem(h,JSON.stringify(t)),A())}function A(){const t=c();t&&(t.lastActiveAt=new Date().toISOString(),localStorage.setItem(h,JSON.stringify(t)))}function L(){return c()!==null}function D(){const t=c();if(!t)return;const e=new Date,i=new Date(t.lastActiveAt),s=Math.floor((e.getTime()-i.getTime())/(1e3*60*60*24));s===1?t.streakDays++:(s>1||s===0&&t.streakDays===0)&&(t.streakDays=1),t.lastActiveAt=e.toISOString(),u(t)}function I(t){const e=c();e&&(e.totalXP+=t,u(e))}function O(t){const e=c();if(!e)return;const i=new Date().getDay();e.weeklyActivity[i]+=t,u(e)}function X(t){const e=c();if(!e)return;const i=e.achievements.find(s=>s.id===t);i&&!i.unlocked&&(i.unlocked=!0,u(e))}function N(t){const e=c();e&&(e.wordsLearned+=t,u(e))}function E(t){let e=c();if(!e)return;e.totalXP=(e.totalXP||0)+50,e.wordsLearned=(e.wordsLearned||0)+12;const i=new Date().getDay();e.weeklyActivity||(e.weeklyActivity=[0,0,0,0,0,0,0]),e.weeklyActivity[i]+=15,e.skills||(e.skills=[]);const s=e.skills.findIndex(n=>n.id===t);if(s!==-1){e.skills[s].status="completed",e.skills[s].stars=3;const n=e.skills[s+1];n&&n.status==="locked"&&(n.status="current")}if(u(e),D(),e=c(),!e)return;const o=e.achievements.find(n=>n.id==="early_bird");o&&!o.unlocked&&e.totalXP>0&&(o.unlocked=!0);const l=new Date().getDay(),r=l===0||l===6,a=e.achievements.find(n=>n.id==="weekender");a&&!a.unlocked&&r&&(a.unlocked=!0);const d=e.achievements.find(n=>n.id==="polyglot");d&&!d.unlocked&&e.wordsLearned>=50&&(d.unlocked=!0);const f=e.achievements.find(n=>n.id==="files_on_fire");f&&!f.unlocked&&e.streakDays>=3&&(f.unlocked=!0);const k=e.achievements.find(n=>n.id==="unstoppable");k&&!k.unlocked&&e.streakDays>=7&&(k.unlocked=!0);const m=e.achievements.find(n=>n.id==="scholar");m&&!m.unlocked&&e.totalXP>=500&&(m.unlocked=!0);const g=e.achievements.find(n=>n.id==="word_master");if(g&&!g.unlocked&&e.wordsLearned>=50&&(g.unlocked=!0),s!==-1&&e.skills[s].stars===3){const n=e.achievements.find(v=>v.id==="sharpshooter");n&&!n.unlocked&&(n.unlocked=!0)}u(e)}export{I as a,O as b,u as c,E as d,c as g,L as h,N as i,P as s,b as t,X as u};
